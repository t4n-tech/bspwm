#!/usr/bin/env bash
# Indikator volume untuk PipeWire via wpctl

get_volume() {
    wpctl get-volume @DEFAULT_SINK@ | awk '{print $2 * 100}' | cut -d. -f1
}

get_mute() {
    wpctl get-volume @DEFAULT_SINK@ | grep -q MUTED && echo "muted" || echo "unmuted"
}

volume=$(get_volume)
mute=$(get_mute)

if [[ "$mute" == "muted" ]]; then
    echo "ðŸ”‡ Muted"
else
    if [[ $volume -ge 65 ]]; then
        icon="ðŸ”Š"
    elif [[ $volume -ge 35 ]]; then
        icon="ðŸ”‰"
    else
        icon="ðŸ”ˆ"
    fi
    echo "$icon $volume%"
fi