# Picom v12.5 Configuration - Stabil & Stylish

#################################
# BACKEND (PENTING UNTUK STABILITAS)
#################################
# Gunakan xrender untuk menghindari flicker (sangat stabil)
backend = "xrender";
# Jika GPU dan driver mendukung, bisa coba glx (lebih ringan GPU tapi rawan flicker)
# backend = "glx";

# Sinkronisasi dengan layar (cegah tearing)
vsync = true;

#################################
# BLUR - EFEK RINGAN
#################################
# Metode blur: kernel (lebih ringan dari gaussian)
blur-method = "kernel";
# Kernel 5x5 dengan nilai 1 (efek blur halus, beban rendah)
blur-kernel = "5,5,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1";

# Alternatif: gaussian dengan ukuran kecil (lebih halus tapi lebih berat)
# blur-method = "gaussian";
# blur-size = 6;
# blur-deviation = 0.5;

# Aktifkan blur untuk background jendela
blur-background = true;
blur-background-frame = true;

# Jangan blur pada aplikasi tertentu (terminal, rofi, panel)
blur-background-exclude = [
  "class_g = 'xfce4-terminal'",
  "class_g = 'Rofi'",
  "class_g = 'Polybar'",
  "window_type = 'dock'",
  "window_type = 'desktop'"
];

#################################
# SHADOW (MATIKAN UNTUK RINGAN)
#################################
shadow = false;
# Jika ingin shadow, aktifkan dengan opsi berikut:
# shadow = true;
# shadow-radius = 7;
# shadow-opacity = 0.5;
# shadow-offset-x = -7;
# shadow-offset-y = -7;
# shadow-exclude = [
#   "name = 'Notification'",
#   "class_g = 'Polybar'",
#   "window_type *= 'dock'",
#   "window_type *= 'desktop'"
# ];

#################################
# OPACITY (TRANSPARANSI)
#################################
# Jendela yang tidak aktif sedikit transparan (95%)
inactive-opacity = 0.95;
# Jendela aktif tetap 100%
active-opacity = 1.0;
# Opacity untuk frame (border)
frame-opacity = 0.9;
# Opacity untuk menu (popup, dropdown)
menu-opacity = 1.0;

#################################
# FADING (EFEK HALUS SAAT MUNCUL/HILANG)
#################################
fading = true;
fade-in-step = 0.03;
fade-out-step = 0.03;
fade-delta = 10;

# Jangan fade untuk aplikasi tertentu
fade-exclude = [
  "class_g = 'Rofi'",
  "class_g = 'Polybar'"
];

#################################
# ATURAN KHUSUS UNTUK TIAP JENIS WINDOW
#################################
wintypes:
{
  tooltip = { fade = true; shadow = false; };
  notification = { fade = true; };
  dock = { shadow = false; };
  desktop = { shadow = false; };
};

#################################
# OPTIMASI PERFORMANCE & STABILITAS
#################################
# Lepas komposisi untuk jendela fullscreen (mengurangi tearing)
unredir-if-possible = true;

# Jangan komposisi untuk jendela yang tidak perlu (misal: rofi, polybar)
focus-exclude = [
  "class_g = 'Rofi'",
  "class_g = 'Polybar'"
];

# Deteksi opacity dari client
detect-client-opacity = true;

# Gunakan damage untuk efisiensi
use-damage = true;

# Tandai jendela terfokus
mark-wmwin-focused = true;
mark-ovredir-focused = true;

#################################
# OPSI TAMBAHAN UNTUK GLX (JIKA MENGGUNAKAN)
#################################
# Berikut hanya berlaku jika backend = "glx"
# glx-no-stencil = true;
# glx-no-rebind-pixmap = true;
# glx-swap-method = "buffer-age";  # coba "undefined" jika flicker