#!/usr/bin/bash

# Ambil data RAM dari free (dalam MiB)
mem_total_mib=$(free -m | awk '/Mem:/ {print $2}')
mem_used_mib=$(free -m | awk '/Mem:/ {print $3}')

# Hitung persen
mem_perc=$((mem_used_mib * 100 / mem_total_mib))

# Hitung total dalam GiB (1 angka desimal)
mem_total_gib=$(echo "scale=1; $mem_total_mib/1024" | bc -l)

# Kalau RAM used lebih dari 1000 MiB → tampil GiB
if [ "$mem_used_mib" -ge 1000 ]; then
    mem_used_gib=$(echo "scale=1; $mem_used_mib/1024" | bc -l)
    echo " ${mem_perc}% [${mem_used_gib}Gi/${mem_total_gib}Gi]"
else
    # Kalau RAM used kurang dari 1000 MiB → tampil MiB
    echo " ${mem_perc}% [${mem_used_mib}Mi/${mem_total_gib}Gi]"
fi
